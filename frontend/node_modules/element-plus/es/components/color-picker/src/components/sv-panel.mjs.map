{"version":3,"file":"sv-panel.mjs","sources":["../../../../../../../packages/components/color-picker/src/components/sv-panel.vue"],"sourcesContent":["<template>\n  <div\n    class=\"el-color-svpanel\"\n    :style=\"{\n      backgroundColor: background,\n    }\"\n  >\n    <div class=\"el-color-svpanel__white\" />\n    <div class=\"el-color-svpanel__black\" />\n    <div\n      class=\"el-color-svpanel__cursor\"\n      :style=\"{\n        top: cursorTop + 'px',\n        left: cursorLeft + 'px',\n      }\"\n    >\n      <div />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  ref,\n  computed,\n  watch,\n  getCurrentInstance,\n  onMounted,\n} from 'vue'\nimport { getClientXY } from '@element-plus/utils'\nimport draggable from '../draggable'\n\nimport type { PropType } from 'vue'\nimport type Color from '../color'\n\nexport default defineComponent({\n  name: 'ElSlPanel',\n\n  props: {\n    color: {\n      type: Object as PropType<Color>,\n      required: true,\n    },\n  },\n  setup(props) {\n    // instance\n    const instance = getCurrentInstance()\n    // data\n    const cursorTop = ref(0)\n    const cursorLeft = ref(0)\n    const background = ref('hsl(0, 100%, 50%)')\n    const colorValue = computed(() => {\n      const hue = props.color.get('hue')\n      const value = props.color.get('value')\n      return { hue, value }\n    })\n\n    // methods\n    function update() {\n      const saturation = props.color.get('saturation')\n      const value = props.color.get('value')\n\n      const el = instance.vnode.el\n      const { clientWidth: width, clientHeight: height } = el\n\n      cursorLeft.value = (saturation * width) / 100\n      cursorTop.value = ((100 - value) * height) / 100\n\n      background.value = `hsl(${props.color.get('hue')}, 100%, 50%)`\n    }\n\n    function handleDrag(event) {\n      const el = instance.vnode.el\n      const rect = el.getBoundingClientRect()\n      const { clientX, clientY } = getClientXY(event)\n\n      let left = clientX - rect.left\n      let top = clientY - rect.top\n      left = Math.max(0, left)\n      left = Math.min(left, rect.width)\n\n      top = Math.max(0, top)\n      top = Math.min(top, rect.height)\n\n      cursorLeft.value = left\n      cursorTop.value = top\n      props.color.set({\n        saturation: (left / rect.width) * 100,\n        value: 100 - (top / rect.height) * 100,\n      })\n    }\n\n    // watch\n    watch(\n      () => colorValue.value,\n      () => {\n        update()\n      }\n    )\n    // mounted\n    onMounted(() => {\n      draggable(instance.vnode.el as HTMLElement, {\n        drag: (event) => {\n          handleDrag(event)\n        },\n        end: (event) => {\n          handleDrag(event)\n        },\n      })\n\n      update()\n    })\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n    }\n  },\n})\n</script>\n"],"names":["_createElementVNode","_createElementBlock","_normalizeStyle"],"mappings":"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"}