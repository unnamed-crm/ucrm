{"version":3,"file":"avatar2.js","sources":["../../../../../../packages/components/avatar/src/avatar.vue"],"sourcesContent":["<template>\n  <span :class=\"avatarClass\" :style=\"sizeStyle\">\n    <img\n      v-if=\"(src || srcSet) && !hasLoadError\"\n      :src=\"src\"\n      :alt=\"alt\"\n      :srcset=\"srcSet\"\n      :style=\"fitStyle\"\n      @error=\"handleError\"\n    />\n    <el-icon v-else-if=\"icon\">\n      <component :is=\"icon\" />\n    </el-icon>\n    <slot v-else />\n  </span>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, watch } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { useNamespace } from '@element-plus/hooks'\nimport { isNumber, isString, addUnit } from '@element-plus/utils'\nimport { avatarEmits, avatarProps } from './avatar'\n\nimport type { CSSProperties } from 'vue'\n\ndefineOptions({\n  name: 'ElAvatar',\n})\n\nconst props = defineProps(avatarProps)\nconst emit = defineEmits(avatarEmits)\n\nconst ns = useNamespace('avatar')\n\nconst hasLoadError = ref(false)\n\nconst avatarClass = computed(() => {\n  const { size, icon, shape } = props\n  const classList = [ns.b()]\n  if (isString(size)) classList.push(ns.m(size))\n  if (icon) classList.push(ns.m('icon'))\n  if (shape) classList.push(ns.m(shape))\n  return classList\n})\n\nconst sizeStyle = computed(() => {\n  const { size } = props\n  return isNumber(size)\n    ? ({\n        '--el-avatar-size': addUnit(size),\n      } as CSSProperties)\n    : undefined\n})\n\nconst fitStyle = computed<CSSProperties>(() => ({\n  objectFit: props.fit,\n}))\n\n// need reset hasLoadError to false if src changed\nwatch(\n  () => props.src,\n  () => (hasLoadError.value = false)\n)\n\nfunction handleError(e: Event) {\n  hasLoadError.value = true\n  emit('error', e)\n}\n</script>\n"],"names":["useNamespace","ref","computed","isString","isNumber","addUnit","watch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAiCA,IAAA,MAAA,KAAAA,kBAAA,CAAA,QAAA,CAAA,CAAA;AAEA,IAAA,MAAA,eAAAC,OAAA,CAAA,KAAA,CAAA,CAAA;AAEA,IAAA,MAAA,WAAA,GAAAC,aAAA,MAAA;AACA,MAAA,MAAA,EAAA,IAAA,EAAA,IAAA,EAAA,KAAA,EAAA,GAAA,KAAA,CAAA;AACA,MAAA,MAAA,SAAA,GAAA,CAAA,EAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACA,MAAA,IAAAC,eAAA,CAAA,IAAA,CAAA;AAAA,QAAA,SAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,MAAA,IAAA,IAAA;AAAA,QAAA,SAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,MAAA,CAAA,CAAA,CAAA;AACA,MAAA,IAAA,KAAA;AAAA,QAAA,SAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,OAAA,SAAA,CAAA;AAAA,KAAA,CAAA,CAAA;AAGA,IAAA,MAAA,SAAA,GAAAD,aAAA,MAAA;AACA,MAAA,MAAA,EAAA,IAAA,EAAA,GAAA,KAAA,CAAA;AACA,MAAA,OAAAE,cAAA,IACA,CAAA,GAAA;AAAA,QACA,oBAAAC,aAAA,CAAA,IAAA,CAAA;AAAA,OAEA,GAAA,KAAA,CAAA,CAAA;AAAA,KAAA,CAAA,CAAA;AAGA,IAAA,MAAA,QAAA,GAAAH,aAAA,OAAA;AAAA,MACA,WAAA,KAAA,CAAA,GAAA;AAAA,KAAA,CAAA,CAAA,CAAA;AAIA,IAAAI,SAAA,CACA,MAAA,KAAA,CAAA,GACA,EAAA,MAAA,aAAA,KAAA,GAAA,KAAA,CAAA,CAAA;AAGA,IAAA,SAAA,WAAA,CAAA,CAAA,EAAA;AACA,MAAA,YAAA,CAAA,KAAA,GAAA,IAAA,CAAA;AACA,MAAA,IAAA,CAAA,OAAA,EAAA,CAAA,CAAA,CAAA;AAAA,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;"}